<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Settings - MorphAgent</title>
  <link rel="stylesheet" href="css/advanced-settings.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="title-section">
          <h1>Advanced Settings</h1>
          <p>Manage custom website rules and block lists</p>
        </div>
        <div class="header-actions">
          <button class="theme-toggle" id="themeToggle" title="Toggle theme">
            <svg class="theme-icon light-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"/>
            </svg>
            <svg class="theme-icon dark-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z"/>
            </svg>
          </button>
          <button class="close-btn" id="closeBtn" title="Close">
            <span class="icon">âœ•</span>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Website Rules Section -->
      <section class="settings-section">
        <div class="section-header">
          <h2>Website-Specific Rules</h2>
          <p>Set custom user agents for specific websites</p>
        </div>
        
        <div class="rules-container">
          <div class="add-rule-form">
            <div class="form-row">
              <div class="input-group">
                <label for="websiteUrl">Website URL or Pattern</label>
                <input type="text" id="websiteUrl" placeholder="e.g., google.com or *.example.com">
              </div>
              <div class="input-group">
                <label for="customUserAgent">Custom User Agent</label>
                <select id="customUserAgent">
                  <option value="">Select from profiles...</option>
                  <option value="custom">Enter custom UA...</option>
                </select>
              </div>
              <div class="input-group">
                <label for="touchPoints">Touch Points</label>
                <input type="number" id="touchPoints" min="0" max="20" value="0" placeholder="0-20">
              </div>
              <button class="add-rule-btn" id="addRuleBtn">
                <span class="icon">+</span>
                Add Rule
              </button>
            </div>
            
            <div class="custom-ua-input" id="customUaInput" style="display: none;">
              <label for="customUaText">Custom User Agent String</label>
              <textarea id="customUaText" placeholder="Enter custom user agent string..."></textarea>
            </div>
          </div>

          <div class="rules-list">
            <div class="list-header">
              <span>Website</span>
              <span>User Agent</span>
              <span>Touch Points</span>
              <span>Actions</span>
            </div>
            <div class="rules-items" id="rulesItems">
              <!-- Rules will be dynamically added here -->
            </div>
          </div>
        </div>
      </section>

      <!-- Block List Section -->
      <section class="settings-section">
        <div class="section-header">
          <h2>Block List</h2>
          <p>Websites where user agent spoofing should be disabled</p>
        </div>
        
        <div class="blocklist-container">
          <div class="add-block-form">
            <div class="form-row">
              <div class="input-group">
                <label for="blockUrl">Website URL or Pattern</label>
                <input type="text" id="blockUrl" placeholder="e.g., bank.com or *.financial.org">
              </div>
              <button class="add-block-btn" id="addBlockBtn">
                <span class="icon">+</span>
                Add to Block List
              </button>
            </div>
          </div>

          <div class="block-list">
            <div class="list-header">
              <span>Blocked Website</span>
              <span>Actions</span>
            </div>
            <div class="block-items" id="blockItems">
              <!-- Blocked items will be dynamically added here -->
            </div>
          </div>
        </div>
      </section>

      <!-- Tab-Specific Settings Section -->
      <section class="settings-section">
        <div class="section-header">
          <h2>Tab-Specific Settings</h2>
          <p>View and manage settings applied to individual tabs</p>
        </div>
        
        <div class="tab-settings-container">
          <div class="tab-settings-controls">
            <button class="refresh-tabs-btn" id="refreshTabsBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                </svg>
              </span>
              Refresh Tab List
            </button>
            <button class="clear-all-tabs-btn" id="clearAllTabsBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"/>
                </svg>
              </span>
              Clear All Tab Settings
            </button>
          </div>

          <div class="tab-settings-list">
            <div class="list-header">
              <span>Tab URL</span>
              <span>User Agent</span>
              <span>Touch Points</span>
              <span>Actions</span>
            </div>
            <div class="tab-settings-items" id="tabSettingsItems">
              <div class="empty-state">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" opacity="0.3">
                  <path d="M14,2A8,8 0 0,1 22,10A8,8 0 0,1 14,18A8,8 0 0,1 6,10A8,8 0 0,1 14,2M14,4A6,6 0 0,0 8,10A6,6 0 0,0 14,16A6,6 0 0,0 20,10A6,6 0 0,0 14,4Z"/>
                </svg>
                <p>No tab-specific settings found</p>
                <small>Apply settings to individual tabs from the main popup to see them here</small>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Import/Export Section -->
      <section class="settings-section">
        <div class="section-header">
          <h2>Import / Export</h2>
          <p>Backup and restore your settings</p>
        </div>
        
        <div class="import-export-container">
          <div class="action-buttons">
            <button class="export-btn" id="exportBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"/>
                </svg>
              </span>
              Export Settings
            </button>
            <button class="import-btn" id="importBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 16v-6H5l7-7 7 7h-4v6H9zm-4 4h14v2H5z"/>
                </svg>
              </span>
              Import Settings
            </button>
            <button class="debug-btn" id="debugBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M9 3v1H4v2h1v13h4V8h6v11h4V6h1V4h-5V3h-6zm2 2h2v1H11V5zm-7 4h2v2H4V9zm16 0h2v2h-2V9zM4 13h2v2H4v-2zm16 0h2v2h-2v-2zM4 17h2v2H4v-2zm16 0h2v2h-2v-2z"/>
                </svg>
              </span>
              Open Firefox Debug
            </button>
            <input type="file" id="importFile" accept=".json" style="display: none;">
          </div>
          
          <div class="reset-section">
            <button class="reset-btn" id="resetAllBtn">
              <span class="icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"/>
                </svg>
              </span>
              Reset All Settings
            </button>
            <p class="reset-warning">This will permanently delete all custom rules and block list entries</p>
          </div>
        </div>
      </section>
    </main>

    <!-- Status Message -->
    <div class="status-message" id="statusMessage" style="display: none;">
      <span class="status-text" id="statusText"></span>
    </div>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <span class="footer-text">Developed by</span>
        <a href="https://github.com/karthik558" target="_blank" class="footer-link">
          <svg class="footer-icon" width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          KARTHIK LAL
        </a>
      </div>
    </footer>
  </div>

  <script src="js/profiles.js"></script>
  <script src="js/advanced-settings.js"></script>
</body>
</html>
